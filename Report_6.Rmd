---
title: "Report_6"
author: "Kai Li"
date: "May 4, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(foreign)
library(psych)
library(mlogit)

data <- read.table("cmc.data.txt", sep = ",")
output <- as.data.frame(data)
colnames(output) <- c("age", "education_w", "education_h", "child", "religion", "working", "occupation_h", "SII", "media", "method")

output[,2] <- as.factor(output[,2])
output[,3] <- as.factor(output[,3])
output[,5] <- as.factor(output[,5])
output[,6] <- as.factor(output[,6])
output[,7] <- as.factor(output[,7])
output[,8] <- as.factor(output[,8])
output[,9] <- as.factor(output[,9])
output[,10] <- as.factor(output[,10])

```

``` {R}

mldata <- mlogit.data(data = output, 
                      choice = "method", 
                      shape = "wide")

model <- mlogit(method ~ 1 | age + child + religion + education_w + education_h + working + occupation_h,
                data = mldata,
                shape = "long", 
                alt.var = "alt",
                alt.levels = c("No", "Long", "Short"),
                reflevel = "No")

summary(model)

model.2 <- mlogit(method ~ 1 | age + child + religion + education_w + education_h,
                data = mldata,
                shape = "long", 
                alt.var = "alt",
                alt.levels = c("No", "Long", "Short"),
                reflevel = "No")

summary(model.2)

```

``` {R}

library(mnlogit)

fm <- formula(method ~ 1 | age + child + religion + education_w + education_h + working + occupation_h)
model.1 <- mnlogit(fm, mldata, "alt")
summary(model.1)

fm.2 <- formula(method ~ 1 | age + child + religion + education_w + education_h)
model.2 <- mnlogit(fm.2, mldata, "alt")
summary(model.2)

```

Data: http://archive.ics.uci.edu/ml/datasets/Contraceptive+Method+Choice
Dict: http://archive.ics.uci.edu/ml/machine-learning-databases/cmc/cmc.names